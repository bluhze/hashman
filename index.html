<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <meta name="description" content="Generate hashtags by combining terms from multiple inputs. Create, save, and manage your hashtag collections.">
    <title>Hashtag Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <!-- Supabase Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        :root {
            /* Primary Colors */
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --primary-light: #818cf8;
            
            /* Secondary Colors */
            --secondary: #ec4899;
            
            /* Status Colors */
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            
            /* Background Colors */
            --bg-primary: #0f172a;
            --bg-secondary: #1e293b;
            --bg-tertiary: #334155;
            
            /* Text Colors */
            --text-primary: #f1f5f9;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            
            /* UI Elements */
            --border: #334155;
            --shadow: rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, var(--bg-primary) 0%, #1a1a2e 100%);
            margin: 0;
            padding: 0;
            min-height: 100vh;
            color: var(--text-primary);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-tertiary);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb {
            background: var(--border);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary);
        }

        /* Main Header */
        .main-header {
            position: sticky;
            top: 0;
            z-index: 1000;
            background: rgba(30, 41, 59, 0.8);
            border-bottom: 1px solid var(--border);
            backdrop-filter: blur(10px);
            height: 50px;
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 100%;
        }

        /* Logo Styles */
        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            cursor: pointer;
            user-select: none;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            font-weight: bold;
            color: white;
            transition: transform 0.2s;
        }
        
        .logo-icon svg {
            width: 20px;
            height: 20px;
            fill: white;
        }

        .logo:hover .logo-icon {
            transform: scale(1.05);
        }

        .logo-text {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        /* Navigation */
        .header-nav {
            display: flex;
            gap: 0.75rem;
            align-items: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            color: white;
            padding: 0.625rem 1.5rem;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.2s ease;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);
        }

        .btn-secondary {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-primary);
            padding: 0.625rem 1.5rem;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.875rem;
            transition: all 0.2s ease;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .btn-secondary:hover {
            background: var(--bg-tertiary);
            border-color: var(--primary);
        }

        .main-content {
            margin-left: 0;
            padding: 0;
            min-height: 100vh;
            transition: margin-left 0.3s ease;
        }
        
        .main-content.with-sidebar {
            margin-left: 250px;
        }

        /* Sidebar Styles */
        .app-sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 250px;
            height: 100vh;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border);
            z-index: 999;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
        }

        .sidebar-content {
            padding: 1.5rem;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .sidebar-logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 2rem;
            padding-bottom: 1.5rem;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: opacity 0.2s;
        }

        .sidebar-logo:hover {
            opacity: 0.8;
        }

        .sidebar-brand {
            display: flex;
            flex-direction: column;
        }

        .sidebar-title {
            font-size: 1.5rem;
            font-weight: 700;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin: 0;
        }

        .sidebar-subtitle {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin: 0;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        .sidebar-nav {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
            flex: 1;
        }

        .sidebar-link {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1rem;
            background: transparent;
            border: none;
            border-radius: 8px;
            color: var(--text-secondary);
            font-size: 0.95rem;
            font-weight: 500;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            cursor: pointer;
            transition: all 0.2s ease;
            text-align: left;
            width: 100%;
        }

        .sidebar-link:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .sidebar-link.active {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(236, 72, 153, 0.2));
            color: var(--primary-light);
            border-left: 3px solid var(--primary);
        }

        .sidebar-icon {
            width: 20px;
            height: 20px;
            stroke-width: 2;
        }

        .sidebar-user {
            margin-top: auto;
            padding-top: 1.5rem;
            border-top: 1px solid var(--border);
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .sidebar-link-danger {
            color: var(--danger);
        }

        .sidebar-link-danger:hover {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Landing page should be full width */
        .landing-page .container {
            max-width: 100%;
            padding: 0;
        }

        /* Generator Page Container */
        #generatorPage {
            max-width: 600px;
            margin: 0 auto;
            width: 100%;
        }

        /* Landing Page Styles */
        .landing-page {
            width: 100%;
        }

        .section {
            padding: 6rem 0;
        }

        .section-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Hero Section */
        .hero {
            position: relative;
            overflow: hidden;
            padding: 6rem 0;
            min-height: 80vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Rotating Gradient Ring */
        .hero::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 800px;
            height: 800px;
            background: conic-gradient(
                from 0deg,
                transparent 0deg,
                rgba(99, 102, 241, 0.15) 90deg,
                rgba(236, 72, 153, 0.15) 180deg,
                rgba(99, 102, 241, 0.15) 270deg,
                transparent 360deg
            );
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: rotate 15s linear infinite;
            z-index: 0;
            filter: blur(40px);
        }

        /* Pulsing Orb */
        .hero::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(236, 72, 153, 0.15) 0%, transparent 70%);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            animation: pulse 4s ease-in-out infinite;
            z-index: 0;
        }

        @keyframes rotate {
            0% { transform: translate(-50%, -50%) rotate(0deg); }
            100% { transform: translate(-50%, -50%) rotate(360deg); }
        }

        @keyframes pulse {
            0%, 100% {
                transform: translate(-50%, -50%) scale(1);
                opacity: 0.3;
            }
            50% {
                transform: translate(-50%, -50%) scale(1.1);
                opacity: 0.5;
            }
        }

        .hero-content {
            position: relative;
            z-index: 1;
            text-align: center;
            max-width: 900px;
            margin: 0 auto;
        }

        /* Video Placeholder */
        .video-placeholder {
            max-width: 400px;
            aspect-ratio: 16 / 9;
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            margin: 0 auto 3rem;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            box-shadow: 0 20px 60px rgba(99, 102, 241, 0.2);
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .video-placeholder:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 80px rgba(99, 102, 241, 0.3);
        }

        .play-button {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            z-index: 2;
        }

        .video-text {
            position: absolute;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%);
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .hero h1 {
            font-size: 4rem;
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 1.5rem;
            color: var(--text-primary);
        }

        .hero h1 .gradient-text {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero-subtext {
            font-size: 1.25rem;
            color: var(--text-secondary);
            max-width: 700px;
            margin: 0 auto 2.5rem;
            line-height: 1.6;
        }

        .hero-cta {
            margin-top: 2rem;
        }

        .hero-cta .btn-primary {
            padding: 1rem 2.5rem;
            font-size: 1.1rem;
        }

        /* Features Section */
        .features-section {
            padding: 6rem 0;
        }

        .section-header {
            text-align: center;
            margin-bottom: 4rem;
        }

        .section-header h2 {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .section-header p {
            font-size: 1.125rem;
            color: var(--text-secondary);
        }

        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background: var(--bg-secondary);
            padding: 2.5rem;
            border-radius: 16px;
            border: 1px solid var(--border);
            transition: all 0.3s;
        }

        .feature-card:hover {
            transform: translateY(-8px);
            border-color: var(--primary);
            box-shadow: 0 12px 30px rgba(99, 102, 241, 0.2);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
        }

        .feature-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .feature-text {
            font-size: 1rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* Stats Section */
        .stats-section {
            padding: 6rem 0;
            background: var(--bg-secondary);
            border-top: 1px solid var(--border);
            border-bottom: 1px solid var(--border);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 3rem;
        }

        .stat-item {
            text-align: center;
        }

        .stat-item h3 {
            font-size: 3.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, #818cf8, #ec4899);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 0.5rem;
        }

        .stat-item p {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        /* How It Works Section */
        .how-it-works-section {
            padding: 6rem 0;
        }

        .steps-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 3rem;
            margin-top: 3rem;
        }

        .step-card {
            text-align: center;
        }

        .step-number {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            font-weight: 700;
            margin: 0 auto 1.5rem;
        }

        .step-title {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .step-description {
            font-size: 1rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        /* CTA Section */
        .cta-section {
            padding: 6rem 0;
        }

        .cta-box {
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(236, 72, 153, 0.1));
            border: 1px solid rgba(99, 102, 241, 0.3);
            padding: 4rem 3rem;
            border-radius: 20px;
            max-width: 800px;
            margin: 0 auto;
            text-align: center;
        }

        .cta-box h2 {
            font-size: 2.5rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .cta-box p {
            font-size: 1.125rem;
            color: var(--text-secondary);
            margin-bottom: 2rem;
        }

        .cta-box .btn-primary {
            padding: 1rem 2.5rem;
            font-size: 1.1rem;
        }

        /* Footer */
        .footer {
            background: var(--bg-secondary);
            border-top: 1px solid var(--border);
            padding: 4rem 0 2rem;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: 2fr 1fr 1fr 1fr;
            gap: 3rem;
        }

        .footer-brand {
            max-width: 300px;
        }

        .footer-brand h3 {
            font-size: 1.5rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 1rem;
        }

        .footer-brand p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.6;
        }

        .footer-column h4 {
            font-size: 1rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 1rem;
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 0.75rem;
        }

        .footer-column ul li a {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.875rem;
            transition: color 0.2s;
        }

        .footer-column ul li a:hover {
            color: var(--primary-light);
        }

        .footer-bottom {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
            text-align: center;
            border-top: 1px solid var(--border);
            margin-top: 3rem;
        }

        .footer-bottom p {
            color: var(--text-muted);
            font-size: 0.875rem;
        }

        /* Auth Pages (Login & Sign Up) */
        .auth-container {
            min-height: calc(100vh - 80px);
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 2rem;
        }

        .auth-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 3rem;
            max-width: 450px;
            width: 100%;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }

        .auth-header {
            text-align: center;
            margin-bottom: 2.5rem;
        }

        .auth-header h1 {
            font-size: 2rem;
            font-weight: 800;
            color: var(--text-primary);
            margin-bottom: 0.5rem;
        }

        .auth-subtitle {
            font-size: 1rem;
            color: var(--text-secondary);
        }

        .auth-form {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .form-group {
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .form-group label {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .form-group input {
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 0.875rem 1rem;
            font-size: 1rem;
            color: var(--text-primary);
            font-family: inherit;
            transition: all 0.2s ease;
        }

        .form-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .form-group input::placeholder {
            color: var(--text-muted);
        }

        .form-hint {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-top: -0.25rem;
        }

        .form-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: var(--text-secondary);
            cursor: pointer;
        }

        .checkbox-label input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
            accent-color: var(--primary);
        }

        .checkbox-label a {
            color: var(--primary);
            text-decoration: none;
        }

        .checkbox-label a:hover {
            text-decoration: underline;
        }

        .forgot-password {
            font-size: 0.875rem;
            color: var(--primary);
            text-decoration: none;
            transition: color 0.2s;
        }

        .forgot-password:hover {
            color: var(--primary-light);
            text-decoration: underline;
        }

        .auth-submit {
            width: 100%;
            padding: 1rem;
            font-size: 1rem;
            margin-top: 0.5rem;
        }

        .auth-footer {
            text-align: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid var(--border);
        }

        .auth-footer p {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .auth-footer a {
            color: var(--primary);
            text-decoration: none;
            font-weight: 600;
        }

        .auth-footer a:hover {
            text-decoration: underline;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }

            .hero-subtext {
                font-size: 1.125rem;
            }

            .section-header h2 {
                font-size: 2rem;
            }

            .feature-grid,
            .stats-grid,
            .steps-grid {
                grid-template-columns: 1fr;
            }

            .footer-content {
                grid-template-columns: 1fr;
            }

            .header-nav {
                gap: 0.5rem;
            }

            .btn-primary,
            .btn-secondary {
                padding: 0.625rem 1.25rem;
                font-size: 0.875rem;
            }

            .section {
                padding: 4rem 0;
            }

            .cta-box {
                padding: 3rem 2rem;
            }

            .auth-container {
                padding: 1rem;
            }

            .auth-card {
                padding: 2rem 1.5rem;
            }

            .auth-header h1 {
                font-size: 1.75rem;
            }
        }

        h1 {
            font-family: Georgia, 'Times New Roman', serif;
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
            margin-bottom: 40px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(236, 72, 153, 0.1));
            padding: 20px;
            border-radius: 16px;
            border: 1px solid rgba(99, 102, 241, 0.3);
            color: var(--primary-light);
        }

        /* Panel Styles */
        .panel {
            background: var(--bg-secondary);
            border-radius: 16px;
            padding: 2rem;
            border: 1px solid var(--border);
            box-shadow: 0 4px 6px var(--shadow);
            margin-bottom: 2rem;
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .panel-title {
            font-size: 1.25rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--text-primary);
        }

        .badge {
            display: inline-flex;
            align-items: center;
            padding: 0.25rem 0.625rem;
            font-size: 0.75rem;
            font-weight: 600;
            border-radius: 6px;
            background: var(--primary);
            color: white;
        }

        .input-section {
            margin-bottom: 1.5rem;
            position: relative;
        }

        .input-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
        }

        .input-label-text {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .input-hint {
            font-size: 0.75rem;
            color: var(--text-muted);
            font-weight: 400;
            margin-left: 0.5rem;
        }

        .section-controls {
            display: flex;
            gap: 0.5rem;
            align-items: center;
        }

        .section-control-btn {
            width: 28px;
            height: 28px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg-tertiary);
            border: 1px solid #475569;
            border-radius: 6px;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .section-control-btn:hover {
            background: var(--bg-secondary);
            border-color: var(--primary);
            color: var(--primary);
        }

        .input-wrapper {
            position: relative;
            display: flex;
            flex-direction: column;
            gap: 0.5rem;
        }

        .input-field {
            width: 100%;
            padding: 0.875rem 1rem;
            padding-bottom: 2.5rem;
            background: var(--bg-tertiary);
            border: 2px solid #475569;
            border-radius: 10px;
            color: var(--text-primary);
            font-size: 0.95rem;
            transition: all 0.2s;
            resize: vertical;
            min-height: 80px;
            font-family: inherit;
        }

        .input-field::placeholder {
            color: var(--text-muted);
        }

        .input-field:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .input-bottom-controls {
            position: absolute;
            bottom: 0.5rem;
            left: 0.75rem;
            right: 0.75rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            pointer-events: none;
        }

        .input-bottom-controls > * {
            pointer-events: auto;
        }

        .counter-controls {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: var(--bg-secondary);
            padding: 0.25rem 0.5rem;
            border-radius: 6px;
            border: 1px solid #475569;
        }

        .word-count {
            font-size: 0.75rem;
            color: var(--text-muted);
            background: var(--bg-secondary);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            border: 1px solid #475569;
        }

        /* Legacy counter-container and word-count-container - kept for compatibility but hidden */
        .counter-container,
        .word-count-container {
            display: none;
        }

        .counter-buttons {
            display: flex;
            gap: 5px;
        }

        .counter-btn {
            width: 24px;
            height: 24px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: transparent;
            border: none;
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            transition: all 0.2s;
            border-radius: 4px;
        }

        .counter-btn:hover {
            background: var(--bg-tertiary);
            color: var(--primary);
        }

        .counter-btn:active {
            transform: scale(0.95);
        }

        .counter-value {
            min-width: 30px;
            text-align: center;
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .counter-btn.error {
            background-color: var(--danger);
            color: #ffffff;
            border-color: var(--danger);
            animation: shake 0.3s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        .combinations-section {
            margin-bottom: 20px;
            padding: 15px;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(236, 72, 153, 0.1));
            border: 1px solid rgba(99, 102, 241, 0.3);
            border-radius: 16px;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .combinations-label {
            font-size: 0.9rem;
            color: var(--text-primary);
            white-space: nowrap;
            font-weight: 600;
        }

        .combinations-input {
            flex: 1;
            padding: 12px;
            border: 2px solid var(--border);
            background-color: var(--bg-tertiary);
            font-size: 1rem;
            color: var(--text-primary);
            text-align: center;
            border-radius: 10px;
        }

        .generate-buttons-container {
            display: flex;
            gap: 10px;
            margin: 30px 0;
        }

        .generate-buttons-container.single-column {
            flex-direction: column;
        }

        .generate-buttons-container.two-column {
            flex-direction: row;
        }

        .generate-button {
            flex: 1;
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border: none;
            padding: 15px;
            font-size: 1rem;
            color: #ffffff;
            cursor: pointer;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            border-radius: 8px;
            transition: all 0.2s ease;
            box-shadow: 0 4px 8px rgba(99, 102, 241, 0.2);
        }

        .generate-button:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(99, 102, 241, 0.3);
        }

        .save-button {
            flex: 1;
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border);
            padding: 15px;
            font-size: 1rem;
            color: var(--text-primary);
            cursor: pointer;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            border-radius: 8px;
            transition: all 0.2s ease;
        }

        .save-button:hover {
            background-color: var(--bg-secondary);
            transform: translateY(-2px);
        }

        .save-button.green {
            background-color: var(--success);
            color: #ffffff;
            border-color: var(--success);
        }

        .save-button.green:hover {
            background: linear-gradient(135deg, var(--success), #34d399);
            transform: translateY(-2px);
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(4px);
        }

        .modal-content {
            background-color: var(--bg-secondary);
            margin: 15% auto;
            padding: 30px;
            border: 1px solid var(--border);
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 8px 16px var(--shadow);
        }

        .modal-header {
            font-size: 1.5rem;
            font-weight: bold;
            margin-bottom: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        .modal-input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--border);
            background-color: var(--bg-tertiary);
            color: var(--text-primary);
            font-size: 1rem;
            margin-bottom: 20px;
            border-radius: 10px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            transition: all 0.2s ease;
        }

        .modal-input::placeholder {
            color: var(--text-muted);
        }

        .modal-input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .modal-buttons {
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .modal-btn {
            padding: 10px 20px;
            border: none;
            font-size: 1rem;
            cursor: pointer;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        .modal-btn-primary {
            background-color: #e8e8e8;
            color: #000000;
        }

        .modal-btn-primary:hover {
            background-color: #d8d8d8;
        }

        .modal-btn-secondary {
            background-color: #f0f0f0;
            color: #000000;
        }

        .modal-btn-secondary:hover {
            background-color: #e0e0e0;
        }

        .page-section {
            display: none;
        }

        .page-section.active {
            display: block;
        }

        .dashboard-section {
            max-width: 800px;
            margin: 0 auto;
            background-color: var(--bg-secondary);
            padding: 40px;
            border-radius: 16px;
            border: 1px solid var(--border);
            box-shadow: 0 4px 6px var(--shadow);
        }

        #dashboardContent {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .saved-set-item {
            padding: 20px;
            background-color: var(--bg-tertiary);
            border: 2px solid var(--border);
            border-radius: 16px;
            display: flex;
            flex-direction: column;
            cursor: pointer;
            transition: all 0.2s ease;
            position: relative;
        }
        
        .dashboard-result-actions {
            display: flex;
            gap: 1rem;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .dashboard-result-actions .generate-button {
            flex: 1;
            min-width: 150px;
        }

        .saved-set-item:hover {
            background-color: var(--bg-secondary);
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(99, 102, 241, 0.2);
        }

        .saved-set-info {
            flex: 1;
        }

        .saved-set-name {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--text-primary);
            margin-bottom: 5px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        .saved-set-count {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        .saved-set-date {
            font-size: 0.8rem;
            color: var(--text-muted);
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        .empty-dashboard {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-muted);
            font-size: 1rem;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }

        .results-control {
            margin-bottom: 20px;
            padding: 20px;
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 16px;
            display: flex;
            align-items: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        .results-control-label {
            font-size: 0.9rem;
            color: var(--text-primary);
            white-space: nowrap;
            font-weight: 600;
        }

        .results-control-value {
            font-size: 1rem;
            font-weight: bold;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            min-width: 50px;
        }

        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid var(--border);
        }

        .pagination-btn {
            background-color: var(--bg-tertiary);
            border: 1px solid var(--border);
            padding: 8px 15px;
            font-size: 0.9rem;
            color: var(--text-primary);
            cursor: pointer;
            border-radius: 8px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            transition: all 0.2s ease;
        }

        .pagination-btn:hover:not(:disabled) {
            background-color: var(--bg-secondary);
            border-color: var(--primary);
            transform: translateY(-2px);
        }

        .pagination-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .pagination-info {
            font-size: 0.9rem;
            color: var(--text-secondary);
        }

        .output-section {
            margin-bottom: 30px;
            padding: 20px;
            background-color: var(--bg-secondary);
            border: 1px solid var(--border);
            border-radius: 16px;
        }

        #resultsContainer, #savedResultContainer {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
        }

        .result-item {
            padding: 20px;
            background-color: var(--bg-tertiary);
            border: 2px solid var(--border);
            border-radius: 16px;
            position: relative;
            transition: all 0.2s ease;
        }

        .result-item:hover {
            border-color: var(--primary);
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(99, 102, 241, 0.2);
        }

        .result-checkbox {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 20px;
            height: 20px;
            cursor: pointer;
            z-index: 10;
        }

        .result-text {
            font-size: 1rem;
            color: var(--primary-light);
            margin-bottom: 10px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            word-wrap: break-word;
        }

        .copy-button {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border: none;
            padding: 12px 20px;
            font-size: 0.9rem;
            color: #ffffff;
            cursor: pointer;
            text-transform: uppercase;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            width: 100%;
            border-radius: 8px;
            transition: all 0.2s ease;
            box-shadow: 0 4px 8px rgba(99, 102, 241, 0.2);
        }

        .copy-button:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(99, 102, 241, 0.3);
        }

        .input-buttons-container {
            display: flex;
            gap: 10px;
            margin-bottom: 30px;
        }

        .add-input-container {
            display: flex;
            gap: 1rem;
            margin-top: 1.5rem;
            justify-content: center;
        }
        
        .add-input-btn, .remove-input-btn, .clear-all-btn {
            flex: 1;
            min-width: 0;
            max-width: 300px;
        }
        
        .input-disclaimer {
            margin-top: 1.5rem;
            padding: 1rem;
            background: var(--bg-tertiary);
            border: 1px solid var(--border);
            border-radius: 8px;
            border-left: 3px solid var(--warning);
        }
        
        .input-disclaimer p {
            font-size: 0.875rem;
            color: var(--text-secondary);
            line-height: 1.5;
            margin: 0;
        }
        
        .input-disclaimer strong {
            color: var(--text-primary);
        }

        .add-input-btn, .remove-input-btn, .clear-all-btn {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border: none;
            padding: 12px 24px;
            font-size: 0.95rem;
            font-weight: 600;
            color: #ffffff;
            cursor: pointer;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            border-radius: 8px;
            transition: all 0.2s ease;
            box-shadow: 0 4px 8px rgba(99, 102, 241, 0.2);
        }
        
        .clear-all-btn {
            background: linear-gradient(135deg, var(--danger), #dc2626);
        }
        
        .clear-all-btn:hover {
            background: linear-gradient(135deg, #dc2626, var(--danger));
        }

        .add-input-btn:hover, .remove-input-btn:hover {
            background: linear-gradient(135deg, var(--primary-dark), var(--primary));
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(99, 102, 241, 0.3);
        }
        
        .clear-all-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(239, 68, 68, 0.3);
        }

        .remove-input-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: var(--bg-tertiary);
            color: var(--text-muted);
        }

        .input-sections-container {
            margin-bottom: 20px;
        }

        .delete-section-btn {
            background-color: var(--danger);
            border: none;
            width: 30px;
            height: 30px;
            font-size: 1.2rem;
            color: #ffffff;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            flex-shrink: 0;
            transition: all 0.2s ease;
        }

        .delete-section-btn:hover {
            background-color: #dc2626;
            transform: translateY(-2px);
        }

        /* Screen reader only class */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border-width: 0;
        }

        /* Mobile Menu Toggle */
        .mobile-menu-toggle {
            display: none;
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 1001;
            background-color: #048a81;
            color: #ffffff;
            border: none;
            padding: 12px;
            font-size: 1.5rem;
            cursor: pointer;
            border-radius: 8px;
            width: 48px;
            height: 48px;
            align-items: center;
            justify-content: center;
        }

        .mobile-menu-toggle:focus {
            outline: 3px solid #54c6eb;
            outline-offset: 2px;
        }

        /* Responsive Design */
        @media (max-width: 640px) {
            .panel {
                padding: 1.5rem;
            }
            
            .panel-header {
                flex-direction: column;
                gap: 0.75rem;
                align-items: flex-start;
            }
            
            
            .input-label {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
        }

        /* Responsive Design for Header */
        @media (max-width: 640px) {
            .header-container {
                padding: 1rem;
            }
            
            .logo-text {
                font-size: 1.5rem;
            }
            
            .logo-icon {
                width: 36px;
                height: 36px;
                font-size: 1.25rem;
            }
            
            .nav-btn {
                width: 44px;
                height: 44px;
            }
            
            .nav-icon {
                font-size: 1.25rem;
            }
        }

        /* Mobile Responsive Styles */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }

            h1 {
                font-size: 1.8rem;
                padding: 15px;
            }

            .input-section {
                flex-direction: column;
                gap: 10px;
            }

            .input-label {
                width: 100%;
                border-radius: 8px;
            }

            .input-field {
                width: 100%;
                border-radius: 8px;
                min-height: 44px; /* Minimum touch target */
            }

            .counter-container,
            .word-count-container {
                width: 100%;
                border-radius: 8px;
                flex-direction: row;
                justify-content: space-between;
                padding: 15px;
            }

            .counter-value,
            .word-count-value {
                margin-bottom: 0;
            }

            .counter-buttons {
                margin-left: auto;
            }

            /* Ensure buttons meet minimum touch target size (44x44px) */
            .counter-btn {
                min-width: 44px;
                min-height: 44px;
                width: 44px;
                height: 44px;
            }

            .copy-button {
                min-height: 44px;
                padding: 12px 20px;
            }

            .generate-button,
            .save-button {
                min-height: 44px;
                padding: 15px 20px;
            }

            .add-input-container {
                grid-template-columns: 1fr;
            }
            
            .add-input-btn,
            .remove-input-btn,
            .clear-all-btn {
                display: none;
            }
            
            .dashboard-result-actions {
                flex-direction: column;
            }
            
            .dashboard-result-actions .generate-button {
                width: 100%;
            }
            
            .input-disclaimer {
                margin-top: 1rem;
                padding: 0.875rem;
            }
            
            .input-disclaimer p {
                font-size: 0.8125rem;
            }

            .pagination-btn {
                min-height: 44px;
                padding: 12px 20px;
            }

            .modal-btn {
                min-height: 44px;
                padding: 12px 24px;
            }

            #resultsContainer, #savedResultContainer {
                grid-template-columns: 1fr;
            }

            #dashboardContent {
                grid-template-columns: 1fr;
            }
            
            .main-content.with-sidebar {
                margin-left: 200px;
            }
            
            .app-sidebar {
                width: 200px;
            }

            .generate-buttons-container {
                flex-direction: column;
            }

            .input-buttons-container {
                flex-direction: column;
            }

            .combinations-section {
                flex-direction: column;
                gap: 10px;
            }

            .results-control {
                flex-direction: column;
                align-items: flex-start;
            }

            .modal-content {
                width: 95%;
                margin: 10% auto;
                padding: 20px;
            }
        }

        @media (max-width: 480px) {
            h1 {
                font-size: 1.5rem;
            }

            .container {
                padding: 15px;
            }

            .result-item {
                padding: 15px;
            }
        }

        /* Focus styles for accessibility */
        button:focus,
        input:focus,
        a:focus {
            outline: 3px solid var(--primary-light);
            outline-offset: 2px;
        }

        /* Skip to main content link */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 0;
            background: #048a81;
            color: #ffffff;
            padding: 8px;
            text-decoration: none;
            z-index: 100;
        }

        .skip-link:focus {
            top: 0;
        }
    </style>
</head>
<body>
    <!-- Skip to main content link -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Main Header (shown when not logged in) -->
    <header class="main-header" id="mainHeader">
        <div class="header-container">
            <!-- Left Side: Logo -->
            <div class="logo" onclick="navigateToHome()">
                <div class="logo-icon">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 2h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zm0 7h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1zm0 7h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1z"/>
                    </svg>
                </div>
                <span class="logo-text">Hashman</span>
            </div>
            
            <!-- Right Side: Navigation -->
            <nav class="header-nav">
                <button class="btn-secondary" onclick="navigateToLogin()" title="Login" aria-label="Login">
                    Login
                </button>
                <button class="btn-primary" onclick="navigateToSignUp()" title="Sign Up" aria-label="Sign Up">
                    Sign Up
                </button>
            </nav>
        </div>
    </header>

    <!-- Sidebar (shown when logged in) -->
    <aside class="app-sidebar" id="appSidebar" style="display: none;">
        <div class="sidebar-content">
            <!-- Logo Section -->
            <div class="sidebar-logo" onclick="navigateToDashboard()">
                <div class="logo-icon">
                    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path d="M10 2h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zm0 7h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1zm0 7h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1z"/>
                    </svg>
                </div>
                <div class="sidebar-brand">
                    <h2 class="sidebar-title">Hashman</h2>
                    <p class="sidebar-subtitle">Hashtag Generator</p>
                </div>
            </div>

            <!-- Navigation Links -->
            <nav class="sidebar-nav">
                <button class="sidebar-link" onclick="navigateToDashboard()" aria-label="Go to Dashboard">
                    <svg class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="7" height="7"></rect>
                        <rect x="14" y="3" width="7" height="7"></rect>
                        <rect x="14" y="14" width="7" height="7"></rect>
                        <rect x="3" y="14" width="7" height="7"></rect>
                    </svg>
                    <span>Dashboard</span>
                </button>
                <button class="sidebar-link" onclick="navigateToInputConfig()" aria-label="Go to Hashtag Generator">
                    <svg class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M10 2h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zm0 7h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1zm0 7h4a1 1 0 0 1 1 1v4a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1v-4a1 1 0 0 1 1-1z"/>
                    </svg>
                    <span>Hashtag Generator</span>
                </button>
            </nav>

            <!-- User Section -->
            <div class="sidebar-user">
                <button class="sidebar-link" onclick="navigateToSettings()" aria-label="User Settings">
                    <svg class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"></circle>
                        <path d="M12 1v6m0 6v6m9-9h-6m-6 0H3"></path>
                    </svg>
                    <span>Settings</span>
                </button>
                <button class="sidebar-link sidebar-link-danger" onclick="handleLogout()" aria-label="Logout">
                    <svg class="sidebar-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path>
                        <polyline points="16 17 21 12 16 7"></polyline>
                        <line x1="21" y1="12" x2="9" y2="12"></line>
                    </svg>
                    <span>Logout</span>
                </button>
            </div>
        </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content" id="main-content" role="main">
        <div class="container">

        <!-- Home Page / Landing Page -->
        <section id="homePage" class="page-section active landing-page" aria-labelledby="home-heading">
            
            <!-- Hero Section -->
            <section class="hero">
                <div class="section-container">
                    <div class="hero-content">
                        <!-- Video Placeholder -->
                        <div class="video-placeholder" onclick="navigateToInputConfig()">
                            <div class="play-button"></div>
                            <div class="video-text">Watch Demo</div>
                        </div>

                        <!-- Headline -->
                        <h1>
                            Hashtags, <span class="gradient-text">perfectly generated</span>
                        </h1>

                        <!-- Subtext -->
                        <p class="hero-subtext">
                            From content creation to viral marketing, Hashman grows with you. Real hashtag combinations with the simplicity to boost your social media presence instantly.
                        </p>

                        <!-- CTA Button -->
                        <div class="hero-cta">
                            <button class="btn-primary" onclick="navigateToSignUp()">Sign Up Free</button>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Features Section -->
            <section class="features-section section">
                <div class="section-container">
                    <div class="section-header">
                        <h2>Your hashtags, right in your workflow</h2>
                        <p>Everything you need to create engaging hashtag combinations</p>
                    </div>

                    <div class="feature-grid">
                        <div class="feature-card">
                            <div class="feature-icon"></div>
                            <h3 class="feature-title">Instant Generation</h3>
                            <p class="feature-text">Generate thousands of hashtag combinations in seconds. No manual work, no spreadsheets, just results.</p>
                        </div>

                        <div class="feature-card">
                            <div class="feature-icon"></div>
                            <h3 class="feature-title">Smart Combinations</h3>
                            <p class="feature-text">Organize hashtags by category. Mix and match primary keywords, niche tags, and trending terms automatically.</p>
                        </div>

                        <div class="feature-card">
                            <div class="feature-icon"></div>
                            <h3 class="feature-title">Copy & Export</h3>
                            <p class="feature-text">One-click copying to clipboard. Export to multiple formats for your workflow: TXT, CSV, or formatted for any platform.</p>
                        </div>

                        <div class="feature-card">
                            <div class="feature-icon"></div>
                            <h3 class="feature-title">Save & Organize</h3>
                            <p class="feature-text">Save your favorite combinations. Create collections, tag sets, and organize hashtags for different campaigns.</p>
                        </div>

                        <div class="feature-card">
                            <div class="feature-icon"></div>
                            <h3 class="feature-title">Search & Filter</h3>
                            <p class="feature-text">Find the perfect hashtags instantly. Sort by length, alphabetically, or shuffle for variety.</p>
                        </div>

                        <div class="feature-card">
                            <div class="feature-icon"></div>
                            <h3 class="feature-title">Works Everywhere</h3>
                            <p class="feature-text">Instagram, Twitter, LinkedIn, TikTok. Hashman generates hashtags optimized for every platform's requirements.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Stats Section -->
            <section class="stats-section section">
                <div class="section-container">
                    <div class="stats-grid">
                        <div class="stat-item">
                            <h3>10K+</h3>
                            <p>Combinations Per Minute</p>
                        </div>
                        <div class="stat-item">
                            <h3>100%</h3>
                            <p>Free Forever</p>
                        </div>
                        <div class="stat-item">
                            <h3></h3>
                            <p>Unlimited Usage</p>
                        </div>
                        <div class="stat-item">
                            <h3>0s</h3>
                            <p>Setup Time</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- How It Works Section -->
            <section class="how-it-works-section section">
                <div class="section-container">
                    <div class="section-header">
                        <h2>How It Works</h2>
                    </div>

                    <div class="steps-grid">
                        <div class="step-card">
                            <div class="step-number">1</div>
                            <h3 class="step-title">Add Your Terms</h3>
                            <p class="step-description">Enter your keywords, topics, and trending terms into organized categories. Mix primary keywords with niche-specific and engagement-focused tags.</p>
                        </div>

                        <div class="step-card">
                            <div class="step-number">2</div>
                            <h3 class="step-title">Generate Combinations</h3>
                            <p class="step-description">Click generate and watch as Hashman creates thousands of unique hashtag combinations. Our smart algorithm ensures variety and relevance.</p>
                        </div>

                        <div class="step-card">
                            <div class="step-number">3</div>
                            <h3 class="step-title">Copy & Use</h3>
                            <p class="step-description">Copy individual hashtags or entire sets with one click. Export to your preferred format and paste directly into your social media posts.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- CTA Section -->
            <section class="cta-section section">
                <div class="section-container">
                    <div class="cta-box">
                        <h2>Ready to boost your social media?</h2>
                        <p>Start generating professional hashtag combinations instantly. Sign up freeno credit card required.</p>
                        <button class="btn-primary" onclick="navigateToSignUp()">Sign Up Now</button>
                    </div>
                </div>
            </section>

            <!-- Footer -->
            <footer class="footer">
                <div class="footer-content">
                    <div class="footer-brand">
                        <h3>Hashman</h3>
                        <p>The simplest way to generate powerful hashtag combinations for your social media success.</p>
                    </div>

                    <div class="footer-column">
                        <h4>Product</h4>
                        <ul>
                            <li><a href="#features">Features</a></li>
                            <li><a href="#how-it-works">How It Works</a></li>
                            <li><a href="#" onclick="navigateToSignUp(); return false;">Sign Up</a></li>
                            <li><a href="#" onclick="navigateToLogin(); return false;">Login</a></li>
                        </ul>
                    </div>

                    <div class="footer-column">
                        <h4>Resources</h4>
                        <ul>
                            <li><a href="#">Documentation</a></li>
                            <li><a href="#">Blog</a></li>
                            <li><a href="#">Support</a></li>
                        </ul>
                    </div>

                    <div class="footer-column">
                        <h4>Company</h4>
                        <ul>
                            <li><a href="#">About</a></li>
                            <li><a href="#">Privacy</a></li>
                            <li><a href="#">Terms</a></li>
                        </ul>
                    </div>
                </div>

                <div class="footer-bottom">
                    <p> 2026 Hashman. All rights reserved.</p>
                </div>
            </footer>

        </section>

        <!-- Login Page -->
        <section id="loginPage" class="page-section" aria-labelledby="login-heading">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <h1 id="login-heading">Welcome Back</h1>
                        <p class="auth-subtitle">Sign in to your Hashman account</p>
                    </div>

                    <form class="auth-form" id="loginForm" onsubmit="handleLogin(event)">
                        <div class="form-group">
                            <label for="loginEmail">Email</label>
                            <input 
                                type="email" 
                                id="loginEmail" 
                                name="email" 
                                placeholder="you@example.com" 
                                required
                                aria-required="true"
                            />
                        </div>

                        <div class="form-group">
                            <label for="loginPassword">Password</label>
                            <input 
                                type="password" 
                                id="loginPassword" 
                                name="password" 
                                placeholder="Enter your password" 
                                required
                                aria-required="true"
                            />
                        </div>

                        <div class="form-options">
                            <label class="checkbox-label">
                                <input type="checkbox" id="rememberMe" />
                                <span>Remember me</span>
                            </label>
                            <a href="#" class="forgot-password">Forgot password?</a>
                        </div>

                        <button type="submit" class="btn-primary auth-submit">Sign In</button>
                    </form>

                    <div class="auth-footer">
                        <p>Don't have an account? <a href="#" onclick="navigateToSignUp(); return false;">Sign up</a></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Sign Up Page -->
        <section id="signupPage" class="page-section" aria-labelledby="signup-heading">
            <div class="auth-container">
                <div class="auth-card">
                    <div class="auth-header">
                        <h1 id="signup-heading">Create Account</h1>
                        <p class="auth-subtitle">Start generating hashtags in seconds</p>
                    </div>

                    <form class="auth-form" id="signupForm" onsubmit="handleSignUp(event)">
                        <div class="form-group">
                            <label for="signupName">Full Name</label>
                            <input 
                                type="text" 
                                id="signupName" 
                                name="name" 
                                placeholder="John Doe" 
                                required
                                aria-required="true"
                            />
                        </div>

                        <div class="form-group">
                            <label for="signupEmail">Email</label>
                            <input 
                                type="email" 
                                id="signupEmail" 
                                name="email" 
                                placeholder="you@example.com" 
                                required
                                aria-required="true"
                            />
                        </div>

                        <div class="form-group">
                            <label for="signupPassword">Password</label>
                            <input 
                                type="password" 
                                id="signupPassword" 
                                name="password" 
                                placeholder="Create a strong password" 
                                required
                                minlength="8"
                                aria-required="true"
                                oninput="validatePasswordInput()"
                            />
                            <small class="form-hint" id="passwordHint">Must be at least 8 characters with at least one letter and one number</small>
                            <div id="passwordStrength" style="display: none; margin-top: 0.5rem; font-size: 0.75rem;"></div>
                        </div>

                        <div class="form-group">
                            <label for="signupConfirmPassword">Confirm Password</label>
                            <input 
                                type="password" 
                                id="signupConfirmPassword" 
                                name="confirmPassword" 
                                placeholder="Confirm your password" 
                                required
                                aria-required="true"
                                oninput="validatePasswordMatch()"
                            />
                            <div id="passwordMatch" style="display: none; margin-top: 0.5rem; font-size: 0.75rem;"></div>
                        </div>

                        <div class="form-options">
                            <label class="checkbox-label">
                                <input type="checkbox" id="agreeTerms" required aria-required="true" />
                                <span>I agree to the <a href="#">Terms of Service</a> and <a href="#">Privacy Policy</a></span>
                            </label>
                        </div>

                        <button type="submit" class="btn-primary auth-submit">Create Account</button>
                    </form>

                    <div class="auth-footer">
                        <p>Already have an account? <a href="#" onclick="navigateToLogin(); return false;">Sign in</a></p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Generator Page -->
        <section id="generatorPage" class="page-section" aria-labelledby="generator-heading">
            <h2 id="generator-heading" class="sr-only">Hashtag Generator</h2>

        <div class="panel">
            <div class="panel-header">
                <h2 class="panel-title">
                    <span></span>
                    <span>Input Configuration</span>
                </h2>
                <span class="badge" id="category-count">3 Categories</span>
            </div>

        <div class="input-sections-container" id="inputSectionsContainer">
            <!-- Input Section 1 -->
            <div class="input-section" data-section-id="1">
                <div class="input-label">
                    <div class="input-label-text">
                        <span>High Volume Tags</span>
                    </div>
                </div>
                <div class="input-wrapper">
                    <textarea class="input-field" id="input1" placeholder="fitness, workout, gym, health" aria-label="Primary Keywords - Enter your brand or main topic terms" oninput="updateWordCount(1)"></textarea>
                    <div class="input-bottom-controls">
                        <div class="counter-controls" role="group" aria-label="Counter controls for input 1">
                            <button class="counter-btn" onclick="decrementCounter(1)" aria-label="Decrease counter for input 1"></button>
                            <span class="counter-value" id="counter1" aria-live="polite" aria-atomic="true">0</span>
                            <button class="counter-btn" onclick="incrementCounter(1)" aria-label="Increase counter for input 1">+</button>
                        </div>
                        <span class="word-count" role="status" aria-live="polite"><span id="wordCount1">0</span> Words</span>
                    </div>
                </div>
            </div>

            <!-- Input Section 2 -->
            <div class="input-section" data-section-id="2">
                <div class="input-label">
                    <div class="input-label-text">
                        <span>Mid Volume Tags</span>
                    </div>
                </div>
                <div class="input-wrapper">
                    <textarea class="input-field" id="input2" placeholder="motivation, lifestyle, wellness" aria-label="Category Tags - Enter industry or niche terms" oninput="updateWordCount(2)"></textarea>
                    <div class="input-bottom-controls">
                        <div class="counter-controls" role="group" aria-label="Counter controls for input 2">
                            <button class="counter-btn" onclick="decrementCounter(2)" aria-label="Decrease counter for input 2"></button>
                            <span class="counter-value" id="counter2" aria-live="polite" aria-atomic="true">0</span>
                            <button class="counter-btn" onclick="incrementCounter(2)" aria-label="Increase counter for input 2">+</button>
                        </div>
                        <span class="word-count" role="status" aria-live="polite"><span id="wordCount2">0</span> Words</span>
                    </div>
                </div>
            </div>

            <!-- Input Section 3 -->
            <div class="input-section" data-section-id="3">
                <div class="input-label">
                    <div class="input-label-text">
                        <span>Low Volume Tags</span>
                    </div>
                </div>
                <div class="input-wrapper">
                    <textarea class="input-field" id="input3" placeholder="fitfam, gymlife, gains" aria-label="Engagement Tags - Enter trending or community terms" oninput="updateWordCount(3)"></textarea>
                    <div class="input-bottom-controls">
                        <div class="counter-controls" role="group" aria-label="Counter controls for input 3">
                            <button class="counter-btn" onclick="decrementCounter(3)" aria-label="Decrease counter for input 3"></button>
                            <span class="counter-value" id="counter3" aria-live="polite" aria-atomic="true">0</span>
                            <button class="counter-btn" onclick="incrementCounter(3)" aria-label="Increase counter for input 3">+</button>
                        </div>
                        <span class="word-count" role="status" aria-live="polite"><span id="wordCount3">0</span> Words</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Add Input Button -->
        <div class="add-input-container">
            <button class="add-input-btn" onclick="addInputSection()" aria-label="Add new input section">+ Add Category</button>
            <button class="remove-input-btn" id="removeInputBtn" onclick="removeLastInputSection()" aria-label="Remove last input section" style="display: none;"> Remove Category</button>
            <button class="clear-all-btn" onclick="clearAllInputs()" aria-label="Clear all input fields">Clear All</button>
        </div>
        
        <!-- Disclaimer -->
        <div class="input-disclaimer">
            <p><strong>Note:</strong> Adding more categories will exponentially increase the number of possible combinations. Use this feature thoughtfully to avoid generating an excessive number of results.</p>
        </div>
        </div>

        <!-- Generate Buttons Container -->
        <div class="generate-buttons-container single-column" id="generateButtonsContainer">
            <button class="generate-button" onclick="generateHashtags()" aria-label="Generate hashtags from input terms">Generate HashTags</button>
            <button class="save-button" id="saveButton" onclick="saveResults()" style="display: none;" aria-label="Save generated results">Save</button>
        </div>

        <!-- Results Control Section -->
        <div class="results-control" id="resultsControl" style="display: none;" role="status" aria-live="polite">
            <div class="results-control-label">Total Results:</div>
            <div class="results-control-value" id="totalResults" aria-label="Total number of generated results">0</div>
        </div>

        <!-- Output Section -->
        <section class="output-section" id="outputSection" style="display: none;" aria-label="Generated hashtag results">
            <div id="resultsContainer" role="list" aria-label="Generated hashtags"></div>
            <nav class="pagination" id="pagination" aria-label="Pagination for generated results"></nav>
        </section>

        </div>

        <!-- Dashboard Page -->
        <section id="dashboardPage" class="page-section" aria-labelledby="dashboard-heading">
            <div class="dashboard-section">
                <div id="dashboardList">
                    <h2 id="dashboard-heading" style="margin-bottom: 20px; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;">Saved Results</h2>
                    <div id="dashboardContent" role="list" aria-label="Saved result sets"></div>
                </div>
                <div id="dashboardResultView" style="display: none;" aria-label="Saved result details">
                    <div class="dashboard-result-actions">
                        <button class="generate-button" onclick="backToDashboard()" aria-label="Return to dashboard"> Back to Dashboard</button>
                        <button class="generate-button" onclick="exportToCSV()" aria-label="Export results to CSV" style="background: linear-gradient(135deg, var(--success), #34d399);"> Export to CSV</button>
                        <button class="generate-button" onclick="deleteCurrentSet()" aria-label="Delete this set" style="background: linear-gradient(135deg, var(--danger), #dc2626);"> Delete Set</button>
                    </div>
                    <div id="savedResultContainer" role="list" aria-label="Generated hashtags"></div>
                    <nav class="pagination" id="savedResultPagination" aria-label="Pagination for saved results"></nav>
                </div>
            </div>
        </section>

        <!-- Save Modal -->
        <div id="saveModal" class="modal" role="dialog" aria-labelledby="modal-title" aria-modal="true" style="display: none;">
            <div class="modal-content">
                <h3 class="modal-header" id="modal-title">Save Results Set</h3>
                <label for="setNameInput" class="sr-only">Enter a name for this result set</label>
                <input type="text" class="modal-input" id="setNameInput" placeholder="Enter set name..." autofocus aria-label="Enter a name for this result set">
                <div class="modal-buttons">
                    <button class="modal-btn modal-btn-secondary" onclick="closeSaveModal()" aria-label="Cancel saving results">Cancel</button>
                    <button class="modal-btn modal-btn-primary" onclick="confirmSave()" aria-label="Save the result set">Save</button>
                </div>
            </div>
        </div>

        </div>
    </div>

    <script>
        // ============================================
        // SUPABASE CONFIGURATION
        // ============================================
        // TODO: Replace these with your Supabase project credentials
        // Get these from: https://supabase.com/dashboard/project/_/settings/api
        const SUPABASE_URL = 'https://cdryqptoapfrxtbjxrol.supabase.co'; // e.g., 'https://xxxxx.supabase.co'
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNkcnlxcHRvYXBmcnh0Ymp4cm9sIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Njc4MTU5NjcsImV4cCI6MjA4MzM5MTk2N30.Dxfi3o2cvbmvD-IFYSYxR6QsgVnRl66LPP8fhr9uoN0'; // Your Supabase anon/public key
        
        // Initialize Supabase client
        // Use window object to avoid redeclaration errors
        if (typeof window.supabaseClient === 'undefined') {
            window.supabaseClient = null;
        }
        
        try {
            if (SUPABASE_URL && SUPABASE_URL !== 'YOUR_SUPABASE_URL' && 
                SUPABASE_ANON_KEY && SUPABASE_ANON_KEY !== 'YOUR_SUPABASE_ANON_KEY' &&
                typeof window.supabase !== 'undefined') {
                window.supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                console.log('Supabase initialized successfully');
            } else {
                if (typeof window.supabase === 'undefined') {
                    console.warn('Supabase library not loaded. Please check the script tag.');
                } else {
                    console.warn('Supabase not configured. Please add your Supabase URL and anon key in the configuration section above.');
                }
            }
        } catch (error) {
            console.error('Error initializing Supabase:', error);
        }

        // Toast notification function
function showToast(message, type = 'info') {
    // Create toast element
    const toast = document.createElement('div');
    toast.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        padding: 1rem 1.5rem;
        background: ${type === 'success' ? 'var(--success)' : type === 'error' ? 'var(--danger)' : 'var(--primary)'};
        color: white;
        border-radius: 8px;
        font-weight: 600;
        z-index: 10000;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        animation: slideIn 0.3s ease;
    `;
    toast.textContent = message;
    
    // Add animation
    const style = document.createElement('style');
    style.textContent = `
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    `;
    document.head.appendChild(style);
    
    document.body.appendChild(toast);
    
    // Remove after 3 seconds
    setTimeout(() => {
        toast.style.animation = 'slideIn 0.3s ease reverse';
        setTimeout(() => toast.remove(), 300);
    }, 3000);
}
        // ============================================

        const counters = {};
        let nextSectionId = 4; // Start from 4 since we have sections 1, 2, 3 initially

        let allGeneratedHashtags = [];
        let currentPage = 1;
        const resultsPerPage = 10;
        let savedResultsObject = {}; // Object to store saved results
        let currentUser = null; // Current logged in user

        // Initialize counters for existing sections
        counters[1] = 0;
        counters[2] = 0;
        counters[3] = 0;

        // Navigation Functions - Make them globally accessible
        window.navigateToHome = async function() {
            // If user is not logged in, hide sidebar when going to home
            const user = await getCurrentUser();
            if (!user) {
                hideSidebar();
            }
            showPage('home');
            updateActiveNav('home');
        };

        window.navigateToLogin = function() {
            // Hide sidebar when navigating to login (user not logged in)
            hideSidebar();
            showPage('login');
            updateActiveNav('login');
        };

        window.navigateToSignUp = function() {
            // Hide sidebar when navigating to signup (user not logged in)
            hideSidebar();
            showPage('signup');
            updateActiveNav('signup');
        };

        window.navigateToDashboard = function() {
            showPage('dashboard');
            updateActiveNav('dashboard');
        };

        window.navigateToInputConfig = function() {
            showPage('generator');
            updateActiveNav('input-config');
        };

        // Auth Form Handlers
        async function handleLogin(event) {
            event.preventDefault();
            const email = document.getElementById('loginEmail').value.trim();
            const password = document.getElementById('loginPassword').value;
            
            // Basic validation
            if (!email || !password) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            if (!validateEmail(email)) {
                showToast('Please enter a valid email address', 'error');
                return;
            }
            
            // If Supabase is not configured, fall back to localStorage
            if (!window.supabaseClient) {
                showToast('Authentication service not configured. Please configure Supabase.', 'error');
                return;
            }
            
            try {
                // Sign in with Supabase
                const { data, error } = await window.supabaseClient.auth.signInWithPassword({
                    email: email,
                    password: password
                });
                
                if (error) {
                    showToast(error.message || 'Invalid email or password', 'error');
                    return;
                }
                
                if (data.user) {
                    // Set as current user
                    await setCurrentUser(data.user);
                    
                    // Show success message
                    showToast('Login successful!', 'success');
                    
                    // Clear form
                    document.getElementById('loginForm').reset();
                    
                    // Redirect to dashboard
                    setTimeout(() => {
                        showSidebar();
                        navigateToDashboard();
                    }, 1000);
                }
            } catch (err) {
                console.error('Login error:', err);
                showToast('An error occurred during login. Please try again.', 'error');
            }
        }
        
        async function handleLogout() {
            if (confirm('Are you sure you want to logout?')) {
                try {
                    // Sign out from Supabase
                    if (window.supabaseClient) {
                        const { error } = await window.supabaseClient.auth.signOut();
                        if (error) {
                            console.error('Logout error:', error);
                        }
                    }
                    
                    // Clear current user
                    await setCurrentUser(null);
                    currentUser = null;
                    
                    // Hide sidebar and navigate
                    hideSidebar();
                    navigateToHome();
                    showToast('Logged out successfully', 'success');
                } catch (err) {
                    console.error('Logout error:', err);
                    // Still logout locally even if Supabase fails
                    await setCurrentUser(null);
                    currentUser = null;
                    hideSidebar();
                    navigateToHome();
                    showToast('Logged out successfully', 'success');
                }
            }
        }
        
        // Check if user is logged in on page load
        async function checkAuthStatus() {
            const user = await getCurrentUser();
            if (user) {
                currentUser = user;
                showSidebar();
                updateSidebarUserInfo();
                // Stay on current page or go to dashboard
                if (window.location.hash === '' || window.location.hash === '#home') {
                    navigateToDashboard();
                }
            } else {
                hideSidebar();
            }
        }
        
        // Listen for auth state changes
        if (window.supabaseClient) {
            window.supabaseClient.auth.onAuthStateChange((event, session) => {
                if (event === 'SIGNED_IN' && session) {
                    setCurrentUser(session.user);
                    showSidebar();
                    updateSidebarUserInfo();
                } else if (event === 'SIGNED_OUT') {
                    setCurrentUser(null);
                    currentUser = null;
                    hideSidebar();
                }
            });
        }
        
        // Update sidebar with user info
        function updateSidebarUserInfo() {
            const user = getCurrentUser();
            if (user) {
                // You can add user info display here if needed
                // For example, show user name in sidebar
            }
        }
        
        // Real-time password validation
        function validatePasswordInput() {
            const password = document.getElementById('signupPassword').value;
            const strengthDiv = document.getElementById('passwordStrength');
            
            if (!password) {
                strengthDiv.style.display = 'none';
                return;
            }
            
            strengthDiv.style.display = 'block';
            
            const hasLength = password.length >= 8;
            const hasLetter = /[A-Za-z]/.test(password);
            const hasNumber = /\d/.test(password);
            
            let strength = 0;
            let message = '';
            let color = '';
            
            if (hasLength) strength++;
            if (hasLetter) strength++;
            if (hasNumber) strength++;
            
            if (strength === 3) {
                message = ' Strong password';
                color = 'var(--success)';
            } else if (strength === 2) {
                message = ' Medium strength';
                color = 'var(--warning)';
            } else {
                message = ' Weak password';
                color = 'var(--danger)';
            }
            
            strengthDiv.textContent = message;
            strengthDiv.style.color = color;
        }
        
        // Real-time password match validation
        function validatePasswordMatch() {
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupConfirmPassword').value;
            const matchDiv = document.getElementById('passwordMatch');
            
            if (!confirmPassword) {
                matchDiv.style.display = 'none';
                return;
            }
            
            matchDiv.style.display = 'block';
            
            if (password === confirmPassword) {
                matchDiv.textContent = ' Passwords match';
                matchDiv.style.color = 'var(--success)';
            } else {
                matchDiv.textContent = ' Passwords do not match';
                matchDiv.style.color = 'var(--danger)';
            }
        }
        
        function showSidebar() {
            document.getElementById('mainHeader').style.display = 'none';
            document.getElementById('appSidebar').style.display = 'block';
            document.getElementById('main-content').classList.add('with-sidebar');
        }
        
        function hideSidebar() {
            document.getElementById('mainHeader').style.display = 'block';
            document.getElementById('appSidebar').style.display = 'none';
            document.getElementById('main-content').classList.remove('with-sidebar');
        }
        
        function navigateToSettings() {
            // Placeholder for settings page
            showToast('Settings page coming soon', 'info');
        }

        // Supabase User Management Functions
        async function setCurrentUser(user) {
            currentUser = user;
            if (user) {
                // Store user metadata in localStorage for quick access
                localStorage.setItem('hashmanCurrentUser', JSON.stringify({
                    id: user.id,
                    email: user.email,
                    name: user.user_metadata?.name || user.email?.split('@')[0] || 'User'
                }));
            } else {
                localStorage.removeItem('hashmanCurrentUser');
            }
        }

        async function getCurrentUser() {
            if (currentUser) return currentUser;
            
            if (!window.supabaseClient) {
                // Fallback to localStorage if Supabase not configured
                try {
                    const user = localStorage.getItem('hashmanCurrentUser');
                    return user ? JSON.parse(user) : null;
                } catch (err) {
                    return null;
                }
            }
            
            try {
                // Get current session from Supabase
                const { data: { session }, error } = await window.supabaseClient.auth.getSession();
                if (error) throw error;
                
                if (session && session.user) {
                    currentUser = session.user;
                    await setCurrentUser(session.user);
                    return session.user;
                }
                return null;
            } catch (err) {
                console.error('Error getting current user:', err);
                return null;
            }
        }

        function validateEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }

        function validatePassword(password) {
            // At least 8 characters, contains at least one letter and one number
            const passwordRegex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d@$!%*#?&]{8,}$/;
            return passwordRegex.test(password);
        }

        async function handleSignUp(event) {
            event.preventDefault();
            const name = document.getElementById('signupName').value.trim();
            const email = document.getElementById('signupEmail').value.trim();
            const password = document.getElementById('signupPassword').value;
            const confirmPassword = document.getElementById('signupConfirmPassword').value;
            const agreeTerms = document.getElementById('agreeTerms').checked;
            
            // Validation
            if (!name || !email || !password || !confirmPassword) {
                showToast('Please fill in all fields', 'error');
                return;
            }
            
            if (name.length < 2) {
                showToast('Name must be at least 2 characters', 'error');
                return;
            }
            
            if (!validateEmail(email)) {
                showToast('Please enter a valid email address', 'error');
                return;
            }
            
            if (password !== confirmPassword) {
                showToast('Passwords do not match', 'error');
                return;
            }
            
            if (password.length < 8) {
                showToast('Password must be at least 8 characters', 'error');
                return;
            }
            
            if (!validatePassword(password)) {
                showToast('Password must contain at least one letter and one number', 'error');
                return;
            }
            
            if (!agreeTerms) {
                showToast('Please agree to the terms and conditions', 'error');
                return;
            }
            
            // If Supabase is not configured, fall back to localStorage
            if (!window.supabaseClient) {
                showToast('Authentication service not configured. Please configure Supabase.', 'error');
                return;
            }
            
            try {
                // Sign up with Supabase
                const { data, error } = await window.supabaseClient.auth.signUp({
                    email: email,
                    password: password,
                    options: {
                        data: {
                            name: name,
                            full_name: name
                        }
                    }
                });
                
                if (error) {
                    showToast(error.message || 'Error creating account. Please try again.', 'error');
                    return;
                }
                
                if (data.user) {
                    // Set as current user
                    await setCurrentUser(data.user);
                    
                    // Show success message
                    showToast('Account created successfully!', 'success');
                    
                    // Clear form
                    document.getElementById('signupForm').reset();
                    
                    // Redirect to dashboard
                    setTimeout(() => {
                        showSidebar();
                        navigateToDashboard();
                    }, 1000);
                }
            } catch (err) {
                console.error('Signup error:', err);
                showToast('An error occurred during signup. Please try again.', 'error');
            }
        }

        // Update active state on navigation buttons
        function updateActiveNav(currentPage) {
            // Remove active class from all nav buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Add active class to current page button (home page has no nav button active)
            if (currentPage === 'dashboard') {
                const dashboardBtn = document.getElementById('navDashboard');
                if (dashboardBtn) {
                    dashboardBtn.classList.add('active');
                }
            } else if (currentPage === 'input-config') {
                const inputConfigBtn = document.getElementById('navInputConfig');
                if (inputConfigBtn) {
                    inputConfigBtn.classList.add('active');
                }
            }
            // Home page: no nav button active
        }

        function getWordCount(id) {
            const input = document.getElementById(`input${id}`).value;
            if (input.trim() === '') return 0;
            // Split by both commas and spaces, then filter empty strings
            const words = input.split(/[,\s]+/).map(w => w.trim()).filter(word => word.length > 0);
            return words.length;
        }

        function incrementCounter(id) {
            const maxWords = getWordCount(id);
            const incrementBtn = event.target.closest('.counter-btn');
            
            if (counters[id] < maxWords) {
                counters[id]++;
                document.getElementById(`counter${id}`).textContent = counters[id];
                updateCombinations();
                
                // Remove error class if it exists
                if (incrementBtn) {
                    incrementBtn.classList.remove('error');
                }
            } else {
                // Add error class to show red feedback
                if (incrementBtn) {
                    incrementBtn.classList.add('error');
                    setTimeout(() => {
                        incrementBtn.classList.remove('error');
                    }, 500);
                }
            }
        }

        function decrementCounter(id) {
            if (counters[id] > 0) {
                counters[id]--;
                document.getElementById(`counter${id}`).textContent = counters[id];
                updateCombinations();
            }
        }

        function updateCombinations() {
            let total = 1;
            let hasZero = false;
            for (const id in counters) {
                if (counters[id] === 0) {
                    hasZero = true;
                    break;
                }
                total *= counters[id];
            }
            // Update category count
            updateCategoryCount();
        }

        function updateCategoryCount() {
            const sections = document.querySelectorAll('.input-section');
            const count = sections.length;
            const categoryCountEl = document.getElementById('category-count');
            if (categoryCountEl) {
                categoryCountEl.textContent = `${count} ${count === 1 ? 'Category' : 'Categories'}`;
            }
        }

        function addInputSection() {
            const sectionId = nextSectionId++;
            counters[sectionId] = 0;
            
            const container = document.getElementById('inputSectionsContainer');
            const newSection = document.createElement('div');
            newSection.className = 'input-section';
            newSection.setAttribute('data-section-id', sectionId);
            
            newSection.innerHTML = `
                <div class="input-label">
                    <div class="input-label-text">
                        <span>Additional Tags</span>
                    </div>
                </div>
                <div class="input-wrapper">
                    <textarea class="input-field" id="input${sectionId}" placeholder="Enter terms separated by commas or spaces" aria-label="Input field ${sectionId} for hashtag terms" oninput="updateWordCount(${sectionId})"></textarea>
                    <div class="input-bottom-controls">
                        <div class="counter-controls" role="group" aria-label="Counter controls for input ${sectionId}">
                            <button class="counter-btn" onclick="decrementCounter(${sectionId})" aria-label="Decrease counter for input ${sectionId}"></button>
                            <span class="counter-value" id="counter${sectionId}" aria-live="polite" aria-atomic="true">0</span>
                            <button class="counter-btn" onclick="incrementCounter(${sectionId})" aria-label="Increase counter for input ${sectionId}">+</button>
                        </div>
                        <span class="word-count" role="status" aria-live="polite"><span id="wordCount${sectionId}">0</span> Words</span>
                    </div>
                </div>
            `;
            
            container.appendChild(newSection);
            updateCombinations();
            updateRemoveButtonState();
            updateCategoryCount();
        }

        function removeLastInputSection() {
            const sections = document.querySelectorAll('.input-section');
            
            // Keep at least 2 sections
            if (sections.length <= 2) {
                return;
            }
            
            // Get the last section
            const lastSection = sections[sections.length - 1];
            const sectionId = parseInt(lastSection.getAttribute('data-section-id'));
            
            // Remove the section from DOM
            lastSection.remove();
            
            // Clean up counter
            delete counters[sectionId];
            
            // Update combinations
            updateCombinations();
            updateRemoveButtonState();
            updateCategoryCount();
        }

        function updateRemoveButtonState() {
            const sections = document.querySelectorAll('.input-section');
            const removeBtn = document.getElementById('removeInputBtn');
            
            // Show remove button only if more than 2 sections
            if (removeBtn) {
                if (sections.length <= 2) {
                    removeBtn.style.display = 'none';
                } else {
                    removeBtn.style.display = 'block';
                }
            }
        }

        function updateWordCount(id) {
            const words = getWordCount(id);
            const wordCountEl = document.getElementById(`wordCount${id}`);
            if (wordCountEl) {
                wordCountEl.textContent = words;
            }
            
            // Ensure counter doesn't exceed word count
            if (counters[id] > words) {
                counters[id] = words;
                document.getElementById(`counter${id}`).textContent = counters[id];
                updateCombinations();
            }
        }

        // Initialize word counts on page load
        document.addEventListener('DOMContentLoaded', async function() {
            // Check authentication status first
            await checkAuthStatus();
            
            const sections = document.querySelectorAll('.input-section');
            sections.forEach(section => {
                const sectionId = section.getAttribute('data-section-id');
                updateWordCount(parseInt(sectionId));
            });
            updateCombinations();
            updateRemoveButtonState();
            updateCategoryCount();
            
            // Load saved results object from localStorage
            try {
                const saved = localStorage.getItem('savedResultsObject');
                if (saved) {
                    savedResultsObject = JSON.parse(saved);
                }
            } catch (err) {
                console.error('Failed to load saved results:', err);
            }
            
            // Initialize dashboard display
            displayDashboard();
            
            // Initialize navigation active state (default to home)
            updateActiveNav('home');
            
            // Smooth scrolling for anchor links
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    const href = this.getAttribute('href');
                    if (href !== '#' && href !== '') {
                        const target = document.querySelector(href);
                        if (target) {
                            e.preventDefault();
                            target.scrollIntoView({
                                behavior: 'smooth',
                                block: 'start'
                            });
                        }
                    }
                });
            });
        });

        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        function getRandomWords(words, count) {
            if (count <= 0 || words.length === 0) return [];
            const shuffled = shuffleArray(words);
            return shuffled.slice(0, Math.min(count, words.length));
        }

        function generateRandomResult(wordsArrays, counts) {
            // Randomly select words from each input based on increment values
            const allSelected = [];
            
            for (let i = 0; i < wordsArrays.length; i++) {
                const selected = getRandomWords(wordsArrays[i], counts[i]);
                allSelected.push(...selected);
            }
            
            // Add "#" in front of each keyword and return as comma-separated string
            const hashtags = allSelected.map(word => {
                const cleanWord = word.replace(/\s+/g, '');
                return cleanWord ? `#${cleanWord}` : '';
            }).filter(tag => tag !== '');
            
            return hashtags.join(', ');
        }

        function generateHashtags() {
            // Get all input sections
            const sections = document.querySelectorAll('.input-section');
            const wordsArrays = [];
            const counts = [];
            
            sections.forEach(section => {
                const sectionId = section.getAttribute('data-section-id');
                const input = document.getElementById(`input${sectionId}`);
                const inputValue = input ? input.value : '';
                
                // Get words from input (split by commas and spaces)
                const words = inputValue.trim() === '' ? [] : inputValue.split(/[,\s]+/).map(w => w.trim()).filter(word => word.length > 0);
                wordsArrays.push(words);
                counts.push(counters[sectionId] || 0);
            });
            
            // Calculate total number of results (total combinations)
            let totalResults = 1;
            for (const count of counts) {
                if (count > 0) {
                    totalResults *= count;
                } else {
                    totalResults = 0;
                    break;
                }
            }
            
            // Generate random results (one for each possible combination)
            allGeneratedHashtags = [];
            for (let i = 0; i < totalResults; i++) {
                const result = generateRandomResult(wordsArrays, counts);
                if (result) {
                    allGeneratedHashtags.push(result);
                }
            }
            
            // Shuffle the results
            allGeneratedHashtags = shuffleArray(allGeneratedHashtags);
            
            // Save results to database (localStorage)
            saveResultsToDatabase(allGeneratedHashtags);
            
            // Update UI
            currentPage = 1;
            document.getElementById('totalResults').textContent = allGeneratedHashtags.length;
            document.getElementById('resultsControl').style.display = 'flex';
            document.getElementById('outputSection').style.display = 'block';
            
            // Change to 2-column layout
            const buttonsContainer = document.getElementById('generateButtonsContainer');
            buttonsContainer.classList.remove('single-column');
            buttonsContainer.classList.add('two-column');
            document.getElementById('saveButton').style.display = 'block';
            
            updateResultsDisplay();
        }

        function updateResultsDisplay() {
            // Show all results with pagination (10 per page)
            const totalPages = Math.ceil(allGeneratedHashtags.length / resultsPerPage);
            
            // Reset to page 1 if current page is out of bounds
            if (currentPage > totalPages && totalPages > 0) {
                currentPage = 1;
            }
            
            // Calculate pagination (10 results per page)
            const startIndex = (currentPage - 1) * resultsPerPage;
            const endIndex = Math.min(startIndex + resultsPerPage, allGeneratedHashtags.length);
            const pageResults = allGeneratedHashtags.slice(startIndex, endIndex);
            
            // Display results with individual copy buttons
            const resultsContainer = document.getElementById('resultsContainer');
            resultsContainer.innerHTML = '';
            
            if (pageResults.length === 0) {
                resultsContainer.innerHTML = '<div class="result-text" role="status" aria-live="polite">No hashtags generated</div>';
            } else {
                pageResults.forEach((result, index) => {
                    const resultItem = document.createElement('div');
                    resultItem.className = 'result-item';
                    resultItem.setAttribute('role', 'listitem');
                    resultItem.setAttribute('aria-label', `Hashtag result ${startIndex + index + 1} of ${allGeneratedHashtags.length}`);
                    
                    const resultText = document.createElement('div');
                    resultText.className = 'result-text';
                    resultText.textContent = result;
                    resultText.setAttribute('aria-label', 'Generated hashtags');
                    
                    const copyBtn = document.createElement('button');
                    copyBtn.className = 'copy-button';
                    copyBtn.textContent = 'COPY TO CLIPBOARD';
                    copyBtn.setAttribute('aria-label', `Copy hashtag result ${startIndex + index + 1} to clipboard`);
                    copyBtn.onclick = () => copyToClipboard(result, copyBtn);
                    
                    resultItem.appendChild(resultText);
                    resultItem.appendChild(copyBtn);
                    resultsContainer.appendChild(resultItem);
                });
            }
            
            // Update pagination
            updatePagination(totalPages);
        }

        function updatePagination(totalPages) {
            const paginationDiv = document.getElementById('pagination');
            paginationDiv.innerHTML = '';
            
            if (totalPages <= 1) return;
            
            // Previous button
            const prevBtn = document.createElement('button');
            prevBtn.className = 'pagination-btn';
            prevBtn.textContent = 'Previous';
            prevBtn.disabled = currentPage === 1;
            prevBtn.setAttribute('aria-label', 'Go to previous page');
            prevBtn.onclick = () => {
                if (currentPage > 1) {
                    currentPage--;
                    updateResultsDisplay();
                }
            };
            paginationDiv.appendChild(prevBtn);
            
            // Page info
            const pageInfo = document.createElement('span');
            pageInfo.className = 'pagination-info';
            pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
            pageInfo.setAttribute('aria-live', 'polite');
            pageInfo.setAttribute('aria-atomic', 'true');
            paginationDiv.appendChild(pageInfo);
            
            // Next button
            const nextBtn = document.createElement('button');
            nextBtn.className = 'pagination-btn';
            nextBtn.textContent = 'Next';
            nextBtn.disabled = currentPage === totalPages;
            nextBtn.setAttribute('aria-label', 'Go to next page');
            nextBtn.onclick = () => {
                if (currentPage < totalPages) {
                    currentPage++;
                    updateResultsDisplay();
                }
            };
            paginationDiv.appendChild(nextBtn);
        }

        function copyToClipboard(text, button) {
            navigator.clipboard.writeText(text).then(() => {
                const originalText = button.textContent;
                button.textContent = 'COPIED!';
                
                // Turn save button green
                const saveBtn = document.getElementById('saveButton');
                if (saveBtn && saveBtn.style.display !== 'none') {
                    saveBtn.classList.add('green');
                }
                
                setTimeout(() => {
                    button.textContent = originalText;
                }, 2000);
            }).catch(err => {
                console.error('Failed to copy:', err);
            });
        }

        function saveResults() {
            // Show modal
            const modal = document.getElementById('saveModal');
            modal.style.display = 'block';
            modal.setAttribute('aria-hidden', 'false');
            document.getElementById('setNameInput').focus();
        }

        function closeSaveModal() {
            const modal = document.getElementById('saveModal');
            modal.style.display = 'none';
            modal.setAttribute('aria-hidden', 'true');
            document.getElementById('setNameInput').value = '';
        }

        function confirmSave() {
            const setName = document.getElementById('setNameInput').value.trim();
            
            if (!setName) {
                alert('Please enter a name for the set');
                return;
            }
            
            const timestamp = Date.now();
            const date = new Date().toLocaleString();
            
            // Save to object with timestamp as key
            savedResultsObject[timestamp] = {
                id: timestamp,
                name: setName,
                date: date,
                results: [...allGeneratedHashtags], // Copy the array
                count: allGeneratedHashtags.length,
                copied: {} // Initialize copied state tracking
            };
            
            // Also save to localStorage for persistence
            try {
                const savedResults = JSON.parse(localStorage.getItem('savedResultsObject') || '{}');
                savedResults[timestamp] = savedResultsObject[timestamp];
                localStorage.setItem('savedResultsObject', JSON.stringify(savedResults));
            } catch (err) {
                console.error('Failed to save to localStorage:', err);
            }
            
            // Close modal
            closeSaveModal();
            
            // Update button to show success
            const saveBtn = document.getElementById('saveButton');
            const originalText = saveBtn.textContent;
            saveBtn.textContent = 'Saved!';
            saveBtn.classList.remove('green');
            setTimeout(() => {
                saveBtn.textContent = originalText;
            }, 2000);
            
            // Update dashboard if it's currently visible
            if (document.getElementById('dashboardPage').classList.contains('active')) {
                displayDashboard();
            }
        }

        // Close modal when clicking outside of it or pressing Escape
        window.onclick = function(event) {
            const modal = document.getElementById('saveModal');
            if (event.target === modal) {
                closeSaveModal();
            }
        }

        // Close modal on Escape key
        document.addEventListener('keydown', function(event) {
            if (event.key === 'Escape') {
                const modal = document.getElementById('saveModal');
                if (modal && modal.style.display === 'block') {
                    closeSaveModal();
                }
            }
        });

        function showPage(pageName) {
            // Hide all pages safely
            const pageIds = ['homePage', 'loginPage', 'signupPage', 'generatorPage', 'dashboardPage'];
            pageIds.forEach(pageId => {
                const page = document.getElementById(pageId);
                if (page) {
                    page.classList.remove('active');
                }
            });
            
            // Show selected page and update navigation
            if (pageName === 'home') {
                const homePage = document.getElementById('homePage');
                if (homePage) {
                    homePage.classList.add('active');
                    updateActiveNav('home');
                } else {
                    console.error('homePage element not found');
                }
            } else if (pageName === 'login') {
                const loginPage = document.getElementById('loginPage');
                if (loginPage) {
                    loginPage.classList.add('active');
                    updateActiveNav('login');
                } else {
                    console.error('loginPage element not found');
                }
            } else if (pageName === 'signup') {
                const signupPage = document.getElementById('signupPage');
                if (signupPage) {
                    signupPage.classList.add('active');
                    updateActiveNav('signup');
                } else {
                    console.error('signupPage element not found');
                }
            } else if (pageName === 'generator') {
                const generatorPage = document.getElementById('generatorPage');
                if (generatorPage) {
                    generatorPage.classList.add('active');
                    updateActiveNav('input-config');
                } else {
                    console.error('generatorPage element not found');
                }
            } else if (pageName === 'dashboard') {
                const dashboardPage = document.getElementById('dashboardPage');
                if (dashboardPage) {
                    dashboardPage.classList.add('active');
                    updateActiveNav('dashboard');
                    displayDashboard();
                } else {
                    console.error('dashboardPage element not found');
                }
            }
        }

        let currentSavedSet = null;
        let currentSavedPage = 1;

        function displayDashboard() {
            // Show list view, hide result view
            document.getElementById('dashboardList').style.display = 'block';
            document.getElementById('dashboardResultView').style.display = 'none';
            
            const dashboardContent = document.getElementById('dashboardContent');
            dashboardContent.innerHTML = '';
            
            // Get all saved results
            const savedResults = Object.values(savedResultsObject);
            
            if (savedResults.length === 0) {
                dashboardContent.innerHTML = '<div class="empty-dashboard" role="status" aria-live="polite">No saved results yet. Generate and save some results to see them here!</div>';
                return;
            }
            
            // Sort by date (newest first)
            savedResults.sort((a, b) => b.id - a.id);
            
            // Display each saved set
            savedResults.forEach((set, index) => {
                const setItem = document.createElement('div');
                setItem.className = 'saved-set-item';
                setItem.setAttribute('role', 'listitem');
                setItem.setAttribute('tabindex', '0');
                setItem.setAttribute('aria-label', `Saved set: ${set.name || 'Unnamed Set'}, ${set.count} results, created on ${set.date}`);
                
                setItem.innerHTML = `
                    <div class="saved-set-info">
                        <div class="saved-set-name">${set.name || 'Unnamed Set'}</div>
                        <div class="saved-set-count">${set.count} results</div>
                        <div class="saved-set-date">${set.date}</div>
                    </div>
                `;
                
                setItem.onclick = () => viewSavedSet(set);
                setItem.onkeydown = (e) => {
                    if (e.key === 'Enter' || e.key === ' ') {
                        e.preventDefault();
                        viewSavedSet(set);
                    }
                };
                dashboardContent.appendChild(setItem);
            });
        }

        function viewSavedSet(set) {
            currentSavedSet = set;
            currentSavedPage = 1;
            
            // Hide list view, show result view
            document.getElementById('dashboardList').style.display = 'none';
            document.getElementById('dashboardResultView').style.display = 'block';
            
            displaySavedSetResults();
        }

        function backToDashboard() {
            document.getElementById('dashboardList').style.display = 'block';
            document.getElementById('dashboardResultView').style.display = 'none';
            currentSavedSet = null;
        }
        
        function deleteSavedSet(setId) {
            if (!confirm('Are you sure you want to delete this set? This action cannot be undone.')) {
                return;
            }
            
            // Remove from localStorage
            const savedResults = JSON.parse(localStorage.getItem('savedResults') || '[]');
            const filtered = savedResults.filter(set => set.id !== setId);
            localStorage.setItem('savedResults', JSON.stringify(filtered));
            
            // Update the savedResultsObject if it exists
            if (savedResultsObject[setId]) {
                delete savedResultsObject[setId];
            }
            
            // Refresh dashboard
            displayDashboard();
            showToast('Set deleted successfully', 'success');
        }
        
        function clearAllInputs() {
            if (!confirm('Are you sure you want to clear all input fields? This action cannot be undone.')) {
                return;
            }
            
            // Clear all input fields
            const inputSections = document.querySelectorAll('.input-section');
            inputSections.forEach(section => {
                const sectionId = section.getAttribute('data-section-id');
                const input = document.getElementById(`input${sectionId}`);
                if (input) {
                    input.value = '';
                    updateWordCount(parseInt(sectionId));
                }
                // Reset counter
                counters[sectionId] = 0;
                const counterElement = document.getElementById(`counter${sectionId}`);
                if (counterElement) {
                    counterElement.textContent = '0';
                }
            });
            
            // Clear results if any
            allGeneratedHashtags = [];
            const resultsContainer = document.getElementById('resultsContainer');
            if (resultsContainer) {
                resultsContainer.innerHTML = '';
            }
            
            // Hide results control
            const resultsControl = document.getElementById('resultsControl');
            if (resultsControl) {
                resultsControl.style.display = 'none';
            }
            
            // Reset generate buttons layout
            const generateButtonsContainer = document.querySelector('.generate-buttons-container');
            if (generateButtonsContainer) {
                generateButtonsContainer.classList.remove('two-column');
                generateButtonsContainer.classList.add('single-column');
            }
            
            updateCombinations();
            showToast('All inputs cleared', 'success');
        }
        
        function exportToCSV() {
            if (!currentSavedSet || !currentSavedSet.results || currentSavedSet.results.length === 0) {
                showToast('No results to export', 'error');
                return;
            }
            
            // Create CSV content
            let csvContent = 'Hashtag Results\n';
            csvContent += `Set Name: ${currentSavedSet.name || 'Unnamed Set'}\n`;
            csvContent += `Date: ${currentSavedSet.date}\n`;
            csvContent += `Total Results: ${currentSavedSet.results.length}\n\n`;
            csvContent += 'Result Number,Hashtags\n';
            
            currentSavedSet.results.forEach((result, index) => {
                // Remove # symbols and join with commas for CSV
                const hashtags = result.replace(/#/g, '').trim();
                csvContent += `${index + 1},"${hashtags}"\n`;
            });
            
            // Create blob and download
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', `${currentSavedSet.name || 'hashtags'}_${Date.now()}.csv`);
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showToast('CSV file downloaded successfully', 'success');
        }
        
        function deleteCurrentSet() {
            if (!currentSavedSet) {
                showToast('No set selected', 'error');
                return;
            }
            
            if (!confirm('Are you sure you want to delete this set? This action cannot be undone.')) {
                return;
            }
            
            const setId = currentSavedSet.id;
            
            // Remove from localStorage
            const savedResults = JSON.parse(localStorage.getItem('savedResults') || '[]');
            const filtered = savedResults.filter(set => set.id !== setId);
            localStorage.setItem('savedResults', JSON.stringify(filtered));
            
            // Update the savedResultsObject if it exists
            if (savedResultsObject[setId]) {
                delete savedResultsObject[setId];
            }
            
            // Go back to dashboard
            backToDashboard();
            
            // Refresh dashboard
            displayDashboard();
            showToast('Set deleted successfully', 'success');
        }

        function displaySavedSetResults() {
            if (!currentSavedSet) return;
            
            const container = document.getElementById('savedResultContainer');
            container.innerHTML = '';
            
            // Initialize copied state if it doesn't exist (for older saved sets)
            if (!currentSavedSet.copied) {
                currentSavedSet.copied = {};
                // Save the initialization
                saveCopiedState();
            }
            
            const totalPages = Math.ceil(currentSavedSet.results.length / resultsPerPage);
            
            // Calculate pagination
            const startIndex = (currentSavedPage - 1) * resultsPerPage;
            const endIndex = Math.min(startIndex + resultsPerPage, currentSavedSet.results.length);
            const pageResults = currentSavedSet.results.slice(startIndex, endIndex);
            
            // Display results with individual copy buttons (same format as generator)
            pageResults.forEach((result, index) => {
                const globalIndex = startIndex + index;
                const resultItem = document.createElement('div');
                resultItem.className = 'result-item';
                resultItem.setAttribute('role', 'listitem');
                resultItem.setAttribute('aria-label', `Saved hashtag result ${globalIndex + 1} of ${currentSavedSet.results.length}`);
                
                // Create checkbox
                const checkbox = document.createElement('input');
                checkbox.type = 'checkbox';
                checkbox.className = 'result-checkbox';
                checkbox.checked = currentSavedSet.copied[globalIndex] || false;
                checkbox.disabled = true; // Make it read-only, only auto-checks on copy
                checkbox.setAttribute('aria-label', `Result ${globalIndex + 1} ${checkbox.checked ? 'has been copied' : 'not copied yet'}`);
                
                const resultText = document.createElement('div');
                resultText.className = 'result-text';
                resultText.textContent = result;
                resultText.setAttribute('aria-label', 'Saved hashtags');
                
                const copyBtn = document.createElement('button');
                copyBtn.className = 'copy-button';
                copyBtn.textContent = 'COPY TO CLIPBOARD';
                copyBtn.setAttribute('aria-label', `Copy saved hashtag result ${globalIndex + 1} to clipboard`);
                copyBtn.onclick = () => {
                    copyToClipboard(result, copyBtn);
                    // Check the checkbox and save state
                    checkbox.checked = true;
                    checkbox.setAttribute('aria-label', `Result ${globalIndex + 1} has been copied`);
                    currentSavedSet.copied[globalIndex] = true;
                    saveCopiedState();
                };
                
                resultItem.appendChild(checkbox);
                resultItem.appendChild(resultText);
                resultItem.appendChild(copyBtn);
                container.appendChild(resultItem);
            });
            
            // Update pagination
            updateSavedSetPagination(totalPages);
        }

        function saveCopiedState() {
            // Save the updated copied state to localStorage
            try {
                const savedResults = JSON.parse(localStorage.getItem('savedResultsObject') || '{}');
                if (currentSavedSet && currentSavedSet.id) {
                    savedResults[currentSavedSet.id] = currentSavedSet;
                    localStorage.setItem('savedResultsObject', JSON.stringify(savedResults));
                    // Update the global object
                    savedResultsObject[currentSavedSet.id] = currentSavedSet;
                }
            } catch (err) {
                console.error('Failed to save copied state:', err);
            }
        }

        function updateSavedSetPagination(totalPages) {
            const paginationDiv = document.getElementById('savedResultPagination');
            paginationDiv.innerHTML = '';
            
            if (totalPages <= 1) return;
            
            // Previous button
            const prevBtn = document.createElement('button');
            prevBtn.className = 'pagination-btn';
            prevBtn.textContent = 'Previous';
            prevBtn.disabled = currentSavedPage === 1;
            prevBtn.setAttribute('aria-label', 'Go to previous page');
            prevBtn.onclick = () => {
                if (currentSavedPage > 1) {
                    currentSavedPage--;
                    displaySavedSetResults();
                }
            };
            paginationDiv.appendChild(prevBtn);
            
            // Page info
            const pageInfo = document.createElement('span');
            pageInfo.className = 'pagination-info';
            pageInfo.textContent = `Page ${currentSavedPage} of ${totalPages}`;
            pageInfo.setAttribute('aria-live', 'polite');
            pageInfo.setAttribute('aria-atomic', 'true');
            paginationDiv.appendChild(pageInfo);
            
            // Next button
            const nextBtn = document.createElement('button');
            nextBtn.className = 'pagination-btn';
            nextBtn.textContent = 'Next';
            nextBtn.disabled = currentSavedPage === totalPages;
            nextBtn.setAttribute('aria-label', 'Go to next page');
            nextBtn.onclick = () => {
                if (currentSavedPage < totalPages) {
                    currentSavedPage++;
                    displaySavedSetResults();
                }
            };
            paginationDiv.appendChild(nextBtn);
        }


        // Database functions (using localStorage)
        function saveResultsToDatabase(results) {
            try {
                const savedSessions = JSON.parse(localStorage.getItem('hashtagSessions') || '[]');
                const session = {
                    id: Date.now(),
                    timestamp: new Date().toISOString(),
                    date: new Date().toLocaleString(),
                    results: results,
                    count: results.length
                };
                savedSessions.unshift(session); // Add to beginning
                
                // Keep only last 50 sessions to avoid storage issues
                if (savedSessions.length > 50) {
                    savedSessions.pop();
                }
                
                localStorage.setItem('hashtagSessions', JSON.stringify(savedSessions));
            } catch (err) {
                console.error('Failed to save results:', err);
            }
        }

    </script>
</body>
</html>

